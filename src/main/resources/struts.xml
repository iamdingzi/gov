<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<constant name="struts.freemarker.manager.classname" value="cn.gov.freemarker.MyFreemarkerManager" />
	<constant name="struts.multipart.maxSize" value="104857600"></constant>
	<package name="gov" extends="struts-default">
		<interceptors>
			<interceptor-stack name="appDefaultStack">
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>
					<param name="exception.logLevel">ERROR</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="appDefaultStack" />

		<!-- Random验证码 -->
		<action name="rand" class="randomAction">
			<result type="stream">
				<param name="contentType">image/jpeg</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		<!-- 页面头部 -->
		<action name="top" class="topAction">
			<result>top.jsp</result>
		</action>
		<!-- 页面尾部 -->
		<action name="bottom" class="bottomAction">
			<result>bottom.jsp</result>
		</action>
		<!-- 首页 -->
		<action name="index" class="indexAction">
			<result>index.jsp</result>
		</action>
		<!-- 投诉建议 -->
		<action name="msg_insert" class="messageAction" method="insert">
		</action>
		<!-- 机构设置查询 -->
		<action name="org" class="organizationAction" method="showOrg">
			<result>org.jsp</result>
		</action>
		<!-- 一级分类展示 -->
		<action name="cat1" class="articleAction" method="showCat1">
			<result>cat1.jsp</result>
		</action>
		<!-- 二级分类展示 -->
		<action name="cat2" class="articleAction" method="showCat2">
			<result>cat2.jsp</result>
		</action>
		<!-- 信息检索 -->
		<action name="search" class="articleAction" method="search">
			<result>search.jsp</result>
		</action>
		<!-- 文章展示 -->
		<action name="showNews" class="articleAction" method="showNews">
			<result>show_news.jsp</result>
		</action>
		<!-- 图片新闻 -->
		<action name="picNews" class="articleAction" method="picNews">
			<result>pic_news.jsp</result>
		</action>
		<!-- 图片新闻幻灯片 -->
		<action name="slide" class="articleAction" method="slide">
			<result>slide.jsp</result>
		</action>
		<!-- 热点新闻 -->
		<action name="hot" class="articleAction" method="hot">
			<result>hot.jsp</result>
		</action>
		<!-- freemarker测试 -->
		<action name="test" class="indexAction" method="test">
			<result type="freemarker">/WEB-INF/ftl/test.ftl</result>
		</action>
		<action name="test_repeat" class="indexAction" method="test">
			<result type="freemarker">/WEB-INF/ftl/test_repeat.ftl</result>
		</action>
		<action name="test_article" class="indexAction" method="test">
			<result type="freemarker">/WEB-INF/ftl/test_article.ftl</result>
		</action>
	</package>
	
	<package name="gov_admin" extends="struts-default"
		namespace="/admin">
		<!-- admin命名空间默认拦截器 -->
		<interceptors>
			<interceptor name="checkLogin" class="cn.gov.interceptor.CheckLoginInterceptor" />
			<interceptor-stack name="adminStack">
				<interceptor-ref name="checkLogin" />
				<interceptor-ref name="defaultStack">
					<!--覆盖defultStack中的exception设置，启用它的日志功能-->
					<param name="exception.logEnabled">true</param>
					<param name="exception.logLevel">ERROR</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="adminStack" />
		<global-results>
			<result name="login" type="redirect">/admin/to_login.jsp</result>
		</global-results>
		
		<!-- 登录验证 -->
		<action name="login" class="loginAction">
			<result name="success" type="redirect">/admin/manage.jsp</result>
			<interceptor-ref name="defaultStack" />
		</action>

		<!-- 后台框架top -->
		<action name="resource_*" class="resourceAction" method="{1}">
			<result name="top">/admin/top.jsp</result>
			<result name="left">/admin/left.jsp</result>
			<result name="right">/admin/right.jsp</result>
		</action>
		
		<!-- 站点设置 -->
		<action name="config_*" class="configAction" method="{1}">
			<result>/admin/config.jsp</result>
		</action>
		
		<!-- 用户管理 -->
		<action name="user_*" class="userAction" method="{1}">
			<result name="query">/admin/user.jsp</result>
			<result name="toAdd">/admin/user_add.jsp</result>
		</action>

		<!-- 信息类别管理 -->
		<action name="category_*" class="categoryAction" method="{1}">
			<result name="query">/admin/category.jsp</result>
			<result name="toAdd">/admin/category_add.jsp</result>
			<result name="toUpdate">/admin/category_update.jsp</result>
		</action>
		
		<!-- 信息管理 -->
		<!-- 内容审核 -->
		<action name="article_review" class="articleAction" method="query">
			<param name="review">0</param>
			<result name="query">/admin/article_review.jsp</result>
		</action>
		<action name="article_*" class="articleAction" method="{1}">
			<result name="main">/admin/article_main.jsp</result>
			<result name="left">/admin/article_left.jsp</result>
			<result name="toAdd">/admin/article_add.jsp</result>
			<result name="toUpdate">/admin/article_update.jsp</result>
			<result name="query">/admin/article.jsp</result>
		</action>

		<!-- 来源管理 -->
		<action name="source_*" class="sourceAction" method="{1}">
			<result name="query">/admin/source.jsp</result>
			<result name="toAdd">/admin/source_add.jsp</result>
			<result name="toUpdate">/admin/source_update.jsp</result>
		</action>

		<!-- 推荐位管理 -->
		<action name="position_*" class="positionAction" method="{1}">
			<result name="query">/admin/position.jsp</result>
			<result name="toAdd">/admin/position_add.jsp</result>
			<result name="toUpdate">/admin/position_update.jsp</result>
		</action>

		<!-- 链接类型管理 -->
		<action name="link_cat_*" class="linkCategoryAction" method="{1}">
			<result name="query">/admin/link_category.jsp</result>
		</action>
		
		<!-- 文字链接管理 -->
		<action name="links_*" class="linksAction" method="{1}">
			<result name="query">/admin/word_links.jsp</result>
		</action>
		
		<!-- 登录日志管理 -->
		<action name="log_*" class="logAction" method="{1}">
			<result name="query">/admin/log.jsp</result>
		</action>

		<!-- IP禁止管理 -->
		<action name="ip_forbid_*" class="ipForbidAction" method="{1}">
			<result name="query">/admin/ip_forbid.jsp</result>
		</action>
		
		<!-- 投诉建议 -->
		<action name="msg_*" class="messageAction" method="{1}">
			<result name="query">/admin/msg.jsp</result>
		</action>
	</package>
</struts>
