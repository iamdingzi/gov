<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.gov.dao.ExtraMapper" >
	<select id="queryArticle" parameterType="map" resultType="java.util.HashMap">
		<![CDATA[select * from
		(select a.*, b.name cat_name, (select name from source where id = a.source_id) source_name,
		(select name from position where id = a.position_id) position_name
		from article a, category b
			where a.cat_id = b.id
		) a]]>
		<where>
			<if test="categoryId != null">
				and a.cat_id = ${categoryId}
			</if>
			<if test="bt != null">
				and a.title like '%${title}%'
			</if>
			<if test="display != null">
				and a.display = ${display}
			</if>
		</where>
		order by id desc
		<include refid="basic.mysql_page"/>
	</select>
	
	<select id="countArticle" parameterType="map" resultType="int">
		<![CDATA[select count(*) from 
		(select a.* from
			article a, category b
			where a.cat_id = b.id
		) a]]>
		<where>
			<if test="categoryId != null">
				and a.cat_id = #{categoryId}
			</if>
			<if test="title != null">
				and title like '%title%'
			</if>
			<if test="display != null">
				and a.display = ${display}
			</if>
		</where>
	</select>
	
	<select id="queryLog" parameterType="map" resultType="cn.gov.model.Log">
		select * from log order by login_time desc
		<include refid="basic.mysql_page"/>
	</select>
	
	<select id="queryMessage" parameterType="map" resultType="cn.gov.model.Message">
		select * from message order by date desc
		<include refid="basic.mysql_page"/>
	</select>
</mapper>